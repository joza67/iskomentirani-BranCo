!function(e,n){"function"==typeof define&&define.amd?define("screenfull",n):"object"==typeof module&&module.exports?module.exports.screenfull=n():e.screenfull=n()}(this,function(){"use strict";var s="undefined"!=typeof window&&void 0!==window.document?window.document:{},o=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,t=n.length,r={};l<t;l++)if((e=n[l])&&e[1]in s){for(l=0;l<e.length;l++)r[n[0][l]]=e[l];return r}return!1}(),l={change:o.fullscreenchange,error:o.fullscreenerror},e={request:function(r,i){return new Promise(function(e,n){var l=function(){this.off("change",l),e()}.bind(this);this.on("change",l);var t=(r=r||s.documentElement)[o.requestFullscreen](i);t instanceof Promise&&t.then(l).catch(n)}.bind(this))},exit:function(){return new Promise(function(e,n){var l,t;this.isFullscreen?(l=function(){this.off("change",l),e()}.bind(this),this.on("change",l),(t=s[o.exitFullscreen]())instanceof Promise&&t.then(l).catch(n)):e()}.bind(this))},toggle:function(e,n){return this.isFullscreen?this.exit():this.request(e,n)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){e=l[e];e&&s.addEventListener(e,n,!1)},off:function(e,n){e=l[e];e&&s.removeEventListener(e,n,!1)},raw:o};return o?(Object.defineProperties(e,{isFullscreen:{get:function(){return Boolean(s[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return s[o.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(s[o.fullscreenEnabled])}}}),e):{isEnabled:!1}}),function(e,n){"function"==typeof define&&define.amd?define("leafletFullScreen",["leaflet","screenfull"],n):"object"==typeof module&&module.exports?module.exports=n(require("leaflet"),require("screenfull")):n(e.L,e.screenfull)}(this,function(s,e){"use strict";return s.Control.FullScreen=s.Control.extend({options:{position:"topleft",title:"Full Screen",titleCancel:"Exit Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1},_screenfull:e,onAdd:function(e){var n="leaflet-control-zoom-fullscreen",l="",e=e.zoomControl&&!this.options.forceSeparateButton?e.zoomControl._container:s.DomUtil.create("div","leaflet-bar");return this.options.content?l=this.options.content:n+=" fullscreen-icon",this._createButton(this.options.title,n,l,e,this.toggleFullScreen,this),(this._map.fullscreenControl=this)._map.on("enterFullscreen exitFullscreen",this._toggleState,this),e},onRemove:function(){s.DomEvent.off(this.link,"click",s.DomEvent.stopPropagation).off(this.link,"click",s.DomEvent.preventDefault).off(this.link,"click",this.toggleFullScreen,this),s.DomEvent.off(this._container,this._screenfull.raw.fullscreenchange,s.DomEvent.stopPropagation).off(this._container,this._screenfull.raw.fullscreenchange,s.DomEvent.preventDefault).off(this._container,this._screenfull.raw.fullscreenchange,this._handleFullscreenChange,this),s.DomEvent.off(document,this._screenfull.raw.fullscreenchange,s.DomEvent.stopPropagation).off(document,this._screenfull.raw.fullscreenchange,s.DomEvent.preventDefault).off(document,this._screenfull.raw.fullscreenchange,this._handleFullscreenChange,this)},_createButton:function(e,n,l,t,r,i){return this.link=s.DomUtil.create("a",n,t),this.link.href="#",this.link.title=e,this.link.innerHTML=l,this.link.setAttribute("role","button"),this.link.setAttribute("aria-label",e),s.DomEvent.on(this.link,"click",s.DomEvent.stopPropagation).on(this.link,"click",s.DomEvent.preventDefault).on(this.link,"click",r,i),s.DomEvent.on(t,this._screenfull.raw.fullscreenchange,s.DomEvent.stopPropagation).on(t,this._screenfull.raw.fullscreenchange,s.DomEvent.preventDefault).on(t,this._screenfull.raw.fullscreenchange,this._handleFullscreenChange,i),s.DomEvent.on(document,this._screenfull.raw.fullscreenchange,s.DomEvent.stopPropagation).on(document,this._screenfull.raw.fullscreenchange,s.DomEvent.preventDefault).on(document,this._screenfull.raw.fullscreenchange,this._handleFullscreenChange,i),this.link},toggleFullScreen:function(){var e=this._map;e._exitFired=!1,e._isFullscreen?(this._screenfull.isEnabled&&!this.options.forcePseudoFullscreen?this._screenfull.exit():(s.DomUtil.removeClass(this.options.fullscreenElement||e._container,"leaflet-pseudo-fullscreen"),e.invalidateSize()),e.fire("exitFullscreen"),e._exitFired=!0,e._isFullscreen=!1):(this._screenfull.isEnabled&&!this.options.forcePseudoFullscreen?this._screenfull.request(this.options.fullscreenElement||e._container):(s.DomUtil.addClass(this.options.fullscreenElement||e._container,"leaflet-pseudo-fullscreen"),e.invalidateSize()),e.fire("enterFullscreen"),e._isFullscreen=!0)},_toggleState:function(){this.link.title=this._map._isFullscreen?this.options.title:this.options.titleCancel,this._map._isFullscreen?L.DomUtil.removeClass(this.link,"leaflet-fullscreen-on"):L.DomUtil.addClass(this.link,"leaflet-fullscreen-on")},_handleFullscreenChange:function(){var e=this._map;e.invalidateSize(),this._screenfull.isFullscreen||e._exitFired||(e.fire("exitFullscreen"),e._exitFired=!0,e._isFullscreen=!1)}}),s.Map.include({toggleFullscreen:function(){this.fullscreenControl.toggleFullScreen()}}),s.Map.addInitHook(function(){this.options.fullscreenControl&&this.addControl(s.control.fullscreen(this.options.fullscreenControlOptions))}),s.control.fullscreen=function(e){return new s.Control.FullScreen(e)},{leaflet:s,screenfull:e}});